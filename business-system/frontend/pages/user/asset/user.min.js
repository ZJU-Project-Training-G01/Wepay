angular.module("user",[]).component("bind",{templateUrl:"frontend/components/bind/bind.html",controller:"bind"}).component("out",{templateUrl:"frontend/components/out/out.html",controller:"out"}).component("in",{templateUrl:"frontend/components/in/in.html",controller:"in"}).component("upload",{templateUrl:"frontend/pages/upload/upload.html",controller:"upload"}).controller("user",["$scope","$http","setPricePrecision","$location","ModalService","$location",function(n,e,o,r,t,a){n.$on("file",function(e,o){n.seller.sellerImgUrl=o}),n.toBank=function(){"未绑定"!==n.seller.bankCard?t.showModal({template:"<out></out>",controller:"out"}).then(function(n){n.element.modal(),n.close.then(function(n){})}):n.$emit("transferErrorMsg","不能转出，原因:银行卡未绑定")},n.upload=function(){n.$emit("upload")},n.bind=function(){t.showModal({template:"<bind></bind>",controller:"bind"}).then(function(n){n.element.modal()})},n.in=function(){"未绑定"!==n.seller.bankCard?t.showModal({template:"<in></in>",controller:"in"}).then(function(n){n.element.modal()}):n.$emit("transferErrorMsg","不能充值，原因:银行卡未绑定")},e({url:"backend/public/GetSellerInfo",method:"post",data:{}}).then(function(e){0===e.data.code?(e=e.data.data,n.seller=e,n.seller.balance=o(n.seller.balance),n.toBind=!n.seller.bankCard,n.seller.sellerImgUrl||(n.seller.sellerImgUrl="frontend/static/imgs/sellerImgs/universal.png"),!0===n.toBind?n.seller.bankCard="未绑定":n.seller.bankCard=n.seller.bankCard.substring(n.seller.bankCard.length-3)):n.$emit("transferErrorMsg","获取用户基础信息失败，原因:"+e.data.msg)})}]),angular.module("bind",[]).controller("bind",["$scope","$location","$window","$http",function(n,e,o,r){n.bind=function(){void 0!==n.bankCard?void 0!==n.bankName?void 0!==n.idCard?void 0!==n.realName?void 0!==n.password?r({url:"backend/public/Bind",method:"post",data:{bankName:n.bankName,bankCard:n.bankCard}}).then(function(e){0===e.data.code&&n.$emit("transferErrorMsg","绑定成功","modal")}):n.$emit("transferErrorMsg","密码不得为空"):n.$emit("transferErrorMsg","姓名不得为空"):n.$emit("transferErrorMsg","身份证号不得为空"):n.$emit("transferErrorMsg","银行名称不得为空"):n.$emit("transferErrorMsg","银行卡号不得为空")},n.cancel=function(){o.location.reload()}}]),angular.module("out",[]).controller("out",["$scope","$http","$window",function(n,e,o){n.out=function(){n.outMoney?n.payPassword?e({url:"backend/public/OutMoney",method:"post",data:{payPassword:n.payPassword,outMoney:n.outMoney}}).then(function(e){0===e.data.code?n.$emit("transferErrorMsg","转出成功","modal"):n.$emit("transferErrorMsg",e.data.msg)}):n.$emit("transferErrorMsg","支付密码不得为空"):n.$emit("transferErrorMsg","转出金额不得为空")},n.cancel=function(){o.location.reload()}}]),angular.module("in",[]).controller("in",["$scope","$http","$window",function(n,e,o){n.in=function(){n.inMoney?n.payPassword?e({url:"backend/public/InMoney",method:"post",data:{payPassword:n.payPassword,inMoney:n.inMoney}}).then(function(e){0===e.data.code?n.$emit("transferErrorMsg","充值成功","modal"):n.$emit("transferErrorMsg",e.data.msg)}):n.$emit("transferErrorMsg","支付密码不得为空"):n.$emit("transferErrorMsg","充值金额不得为空")},n.cancel=function(){o.location.reload()}}]);