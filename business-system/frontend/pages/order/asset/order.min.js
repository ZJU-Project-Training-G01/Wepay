angular.module("order",[]).controller("order",["$scope",function(e){}]).component("navs",{templateUrl:"frontend/components/navs/navs.html",controller:"navsCtrl"}).component("orderItem",{templateUrl:"frontend/components/orderItem/orderItem.html",controller:"orderItemCtrl"}).factory("getDeadline",function(){return function(e){let t=Date.parse(new Date(e))+6048e5-Date.parse(new Date);if(t<0)return!1;let r=Math.floor(t/864e5),o=((t-864e5*r)/36e5).toFixed(0);return"剩余"+r.toString()+"天"+o.toString()+"时"}}).factory("orderServe",function(e){return{orderStatusToName:function(t,r){let o,a;switch(parseInt(t)){case 0:!1===(a=e(r))?(o="您未及时发货",a="订单取消"):o="未发货";break;case 1:o="买家未收货",a="等待买家收货";break;case 2:o="买家收货",a="订单完成";break;default:o="未知错误",a="未知错误"}return{orderName:o,operation:a}}}}),angular.module("orderItem",[]).controller("orderItemCtrl",["$scope","$http","setPricePrecision","orderServe","$rootScope",function(e,t,r,o,a){e.pageSize=10,e.pageNumber=1,e.status=-1,e.$on("receiveStatus",function(t,r){e.status=r,e.orderHttp(e.pageNumber)}),e.sendGood=function(r){t({url:"backend/public/DeliveryGoods",method:"post",data:{orderId:r.orderId}}).then(function(t){let o=t.data.code;if(0===o)r.orderStatus=1,r.orderName="买家未收货",r.operation="等待买家收货";else if(o>0){let r=t.data.msg;e.$emit("transferErrorMsg",r)}})},e.orderHttp=function(a){t({method:"post",url:"backend/public/SellersGetOrders",data:{pageNumber:a,pageSize:e.pageSize,status:e.status}}).then(function(t){e.orders=t.data.data,e.total=t.data.msg,e.orders.forEach(function(e){e.total=e.amount*e.unitPrice,e.orderStatus=parseInt(e.orderStatus),e.unitPrice=r(e.unitPrice),e.total=r(e.total);let{orderName:t,operation:a}=o.orderStatusToName(e.orderStatus,e.orderTime);e.operation=a,e.orderName=t,"订单取消"===e.operation&&(e.orderStatus=4)})}).then(function(e){})},e.orderHttp(e.pageNumber)}]),angular.module("navs",[]).controller("navsCtrl",["$scope",function(e){e.toStatus=function(t){e.$emit("transferStatus",t)}}]);